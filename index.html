<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" href="collartz.png" type="image/x-icon">
	<title>Collatz Conjecture</title>
    <link rel="stylesheet" href="style.css">

	<!-- <style type="text/css">


        body{
            background-color:rgb(40, 44, 52)
        }
		#input-section {
            display: flex;
			flex-direction: column;
			align-items: center;
			margin-top: 15px;
		}
		#input-section input {
            width: 200px;
			height: 30px;
            border-radius: 5px;
			margin-top: 20px;
			text-align: center;
			font-size: 20px;
            outline: none;
		}
        #number::-webkit-outer-spin-button,
        #number::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
            }


        #input-section input::placeholder {
            color: dodgerblue;
            font-size: 14px;
            font-style: italic;
        }

		.btn button {
            display: inline;
			width: 100px;
			height: 40px;
            border-width: 0;
            border-radius: 5px;
			margin-top: 20px;
			background-color: rgb(25, 122, 222);
			color: white;
			font-size: 16px;
			cursor: pointer;
            /* transition: all; */
            transition-duration: 300ms;
		}
        .btn button:hover{
            background-color: rgb(1, 108, 214)

        }
        .btn .reload:hover{
            background-color: rgb(207, 2, 2);

        }

        .btn .reload{
            background-color: rgb(212, 50, 50);
        }


		#result-section {
			display: none;
			flex-direction: column;
			align-items: center;
			margin: 30px auto 30px auto;
            text-align: center;
            max-width: 400px;
            color: #ccc;
		}
	
        #steps{
            color: #ccc;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
        }
        #intro{
            color: #ccc;
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            margin: auto;
            text-align: center;
            max-width: 400px;
        }
        #intro .details{
            font-family: '';
            text-align: left;
            font-size: 15px;
            
        }
        .example summary{
            cursor: pointer;
            color: dodgerblue;
        }

        .example{
            margin-top: 10px;
            text-align: left;
            font-size: 12px;
            
        }
        #canvasDiv{
            max-width: 800px;
            margin: auto;
            text-align: center;
            background-color: #fff;
            display: none;
            border-radius: 10px;

        }

        /* apply different styles for screens with a maximum width of 768px */
@media only screen and (max-width: 768px) {
  #canvasDiv {
    width: 80vw; /* adjust aspect ratio */
  }
}

@media only screen and (max-width: 480px) {
  #canvasDiv {
    width: 100%; /* adjust aspect ratio */
  }
}


	</style> -->
    
</head>
<body>
	<div id="input-section">
        <div id="intro">
            <p>
                Try out Collatz Conjecture
            </p>
            <section class="details"> The Collatz conjecture is a unsolved mathematical problem which states that for any positive integer n, the following process will always reach the number 1: If n is even,
                divide it by 2; if n is odd, multiply it by 3 and add 1. 
                The conjecture is that this process will eventually reach 1 for any positive integer n, 
                but this has not been proven for all numbers and remains one of the most famous unsolved problems in mathematics.</section>
                <details class="example">
                    <summary><b>Example of the Collatz Conjecture:</b></summary>
                    <ul>
                        <li>Let n = 7 even number:</li>
                        <ul>
                        <li>7 * 3 + 1 = 22</li>
                        <li>22 / 2 = 11</li>
                        <li>11 * 3 + 1 = 34 ...</li>
            
                    </ul>
                <li>As you can see, the sequence eventually reaches the number 1. However, the Collatz Conjecture states that this will happen for any positive integer, not just for the example 7.</li>
                </ul>
            </details>
            </div>
            
                <input onkeypress="InputEnter()" autofocus autocomplete="false" type="number" id="number" placeholder="Enter a digit">
                <div class="btn">
                    <button  onclick="calculate()">Calculate</button>
                    <button  onclick="reload()" class="reload">Reload</button>
                </div>
            
	</div>
	<details class="example" id="result-section">
        <summary id="steps" ></summary>
		<p id="result"></p>
    </details>
	</div>
    <div id="canvasDiv">
        <canvas id="myChart"></canvas>
      </div>
      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script type="text/javascript">

        var mapArray = []

        function InputEnter(){
            if (event.key === "Enter"){
                event.preventDefault();
                calculate();
            }
        }

		function calculate() {
			var number = document.getElementById("number").value;
            if (number === '') {
                alert("Input a number")
                return
            }
            if (number <= 0) {
                alert("Enter a positive Integer")
                return
            }
            const label = number
			var result = document.getElementById("result");
            const step = document.getElementById("steps");
            
			var sequence = [+number];
            let steps = 0;
			while (number != 1) {
                steps++
				if (number % 2 == 0) {
					number = number / 2;
				} else {
					number = 3 * number + 1;
				}
				sequence.push(number);
			}
            // console.log(steps)
			step.innerHTML = "There are "+ steps +" steps taken to arrive at 1 ";
			result.innerHTML = "The sequence is: " + sequence.join(" | ");

            let newObj = {steps, label, sequence}

            const exists = mapArray.some(obj => JSON.stringify(obj) === JSON.stringify(newObj))
            if(!exists){
                mapArray.push(newObj)
                plotMultiplyGrahp(mapArray)
            }
            // plotGraph(steps, label, sequence)
        }
        
        function plotMultiplyGrahp(objsArray){

            const canvasDiv = document.getElementById('canvasDiv');
            const resultSection = document.getElementById('result-section');
            const ctx = document.getElementById('myChart');
            let chart = Chart.getChart(ctx);
            if(chart) {
                chart.destroy()
            };

            const biggestSteps = findBiggestNumber(objsArray, 'steps');
            new Chart(ctx, {
                type: 'line',
                data:{
                    labels: createArray(biggestSteps),
                    datasets:  objsArray.map(item => {
                    console.log(item)
                    return {label: `path taken by ${item.label}`,
                        data: item.sequence,
                        borderWidth: 1}
                        }),
                    },

                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            canvasDiv.style.display = 'block';
            resultSection.style.display = 'flex';
        
        }
        


function reload(){
    location.reload()
}

// Helper function
function findBiggestNumber(arr, prop) {
  let biggestNum = Number.NEGATIVE_INFINITY;
  for (let obj of arr) {
    if (obj.hasOwnProperty(prop) && typeof obj[prop] === 'number') {
      if (obj[prop] > biggestNum) {
        biggestNum = obj[prop];
      }
    }
  }
  return biggestNum;
}


        // Helper Function 
function getLongestArray(arr) {
  let longestArr = [];
  for (let obj of arr) {
    for (let key in obj) {
      if (Array.isArray(obj[key])) {
        if (obj[key].length > longestArr.length) {
          longestArr = obj[key];
        }
      }
    }
  }
  return longestArr;
}

		 
        // Helper Function 
        function createArray(number){
            
            const rangeArray = [];
            for (let i = 0; i <= number; i++) {
                rangeArray.push(i);
            }
            return rangeArray
        }

	</script>
</body>
</html>